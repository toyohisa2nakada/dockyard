<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <title>Fitness Memo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <style>
        body {
            margin: 0;
            font-family: "Segoe UI", sans-serif;
            background: #eaeef3;
        }

        .app {
            max-width: 420px;
            margin: auto;
            background: #f7f9fc;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .header {
            background: #4f7cff;
            color: white;
            padding: 14px;
            text-align: center;
            font-size: 18px;
            font-weight: bold;
        }

        .content {
            padding: 12px;

            overflow-y: auto;
        }

        .card {
            background: white;
            border-radius: 16px;
            padding: 14px;
            margin-bottom: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, .08);
        }

        input,
        select,
        textarea,
        button {
            width: 100%;
            margin-top: 6px;
            padding: 10px;
            border-radius: 10px;
            border: 1px solid #ddd;
            font-size: 14px;
        }

        button {
            background: #4f7cff;
            color: white;
            border: none;
            cursor: pointer;
        }

        .delete-btn {
            background: #ff4d4d;
            margin-top: 6px;
        }

        .small {
            background: #777;
            margin-top: 6px;
        }

        .tag {
            color: white;
            padding: 4px 10px;
            border-radius: 8px;
            font-size: 12px;
            margin-left: 6px;
        }

        .strength {
            background: #ff7a7a;
        }

        .cardio {
            background: #4caf50;
        }

        .progress-bar {
            background: #ddd;
            height: 16px;
            border-radius: 10px;
            overflow: hidden;
            margin-top: 6px;
        }

        .progress {
            background: #4caf50;
            height: 100%;
            width: 0%;
            transition: .3s;
        }

        .record {
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid #eee;
        }
    </style>
</head>

<body>

    <div class="app">

        <div class="header">ğŸ‹ï¸ Fitness Memo</div>

        <div class="content">

            <!-- ç›®æ¨™ -->
            <div class="card">
                <h3>ğŸ¯ ç­‹ãƒˆãƒ¬ç›®æ¨™ï¼ˆå›ï¼‰</h3>
                <input id="strengthGoal">

                <div class="progress-bar">
                    <div class="progress" id="strengthBar"></div>
                </div>

                <h3 style="margin-top:12px;">ğŸ¯ æœ‰é…¸ç´ ç›®æ¨™ï¼ˆåˆ†ï¼‰</h3>
                <input id="cardioGoal">

                <div class="progress-bar">
                    <div class="progress" id="cardioBar"></div>
                </div>

                <button onclick="saveGoals()">ä¿å­˜</button>

                <div id="goalStatus"></div>
            </div>

            <!-- å…¥åŠ› -->
            <div class="card">
                <input id="name" placeholder="ç¨®ç›®å">

                <select id="type">
                    <option value="strength">ç­‹ãƒˆãƒ¬</option>
                    <option value="cardio">æœ‰é…¸ç´ </option>
                </select>

                <input id="amount" placeholder="å›æ•° ã¾ãŸã¯ åˆ†">

                <textarea id="note" placeholder="ãƒ¡ãƒ¢"></textarea>

                <button onclick="addRecord()">è¨˜éŒ²</button>
            </div>

            <!-- æ¤œç´¢ -->
            <div class="card">
                <input id="search" placeholder="ğŸ” æ¤œç´¢" oninput="render()">

                <select id="filter" onchange="render()">
                    <option value="all">ã™ã¹ã¦</option>
                    <option value="strength">ç­‹ãƒˆãƒ¬</option>
                    <option value="cardio">æœ‰é…¸ç´ </option>
                </select>

                <div id="list"></div>
            </div>

        </div>
    </div>

    <script>
        let records = JSON.parse(localStorage.getItem("records")) || [];

        let strengthGoal = Number(localStorage.getItem("strengthGoal")) || 0;
        let cardioGoal = Number(localStorage.getItem("cardioGoal")) || 0;

        strengthGoalEl().value = strengthGoal || "";
        cardioGoalEl().value = cardioGoal || "";

        // ç›®æ¨™ä¿å­˜
        function saveGoals() {
            strengthGoal = Number(strengthGoalEl().value);
            cardioGoal = Number(cardioGoalEl().value);

            localStorage.setItem("strengthGoal", strengthGoal);
            localStorage.setItem("cardioGoal", cardioGoal);

            render();
        }

        // ä¿å­˜
        function save() {
            localStorage.setItem("records", JSON.stringify(records));
        }

        // è¿½åŠ 
        function addRecord() {
            const name = nameEl().value;
            const type = typeEl().value;
            const amount = Number(amountEl().value);
            const note = noteEl().value;

            if (!name || !amount) return;

            records.push({
                name,
                type,
                amount,
                note,
                date: new Date().toLocaleString()
            });

            save();
            clear();
            render();
        }

        // å…¥åŠ›ã‚¯ãƒªã‚¢
        function clear() {
            nameEl().value = "";
            amountEl().value = "";
            noteEl().value = "";
        }

        // ä»Šé€±åˆè¨ˆ
        function getWeekly(type) {
            const now = new Date();
            const start = new Date(now);
            start.setDate(now.getDate() - now.getDay());

            return records.filter(r => r.type === type && new Date(r.date) >= start)
                .reduce((sum, r) => sum + r.amount, 0);
        }

        // è¡¨ç¤º
        function render() {
            const list = document.getElementById("list");
            const key = search.value.toLowerCase();
            const fil = filter.value;

            list.innerHTML = "";

            const display = [...records].reverse()
                .filter(r => r.name.toLowerCase().includes(key))
                .filter(r => fil === "all" || r.type === fil);

            display.forEach(r => {
                const unit = r.type === "strength" ? "å›" : "åˆ†";

                const div = document.createElement("div");
                div.className = "record";

                div.innerHTML = `
  <strong>${r.name}</strong>
  <span class="tag ${r.type}">
   ${r.type === "strength" ? "ç­‹ãƒˆãƒ¬" : "æœ‰é…¸ç´ "}
  </span>

  <p>é‡ï¼š${r.amount}${unit}</p>
  <p>${r.note}</p>
  <small>ğŸ“… ${r.date}</small>

  <button class="delete-btn" onclick="removeRecord('${r.date}')">å‰Šé™¤</button>
 `;

                list.appendChild(div);
            });

            updateGoals();
        }

        // å‰Šé™¤
        function removeRecord(date) {
            records = records.filter(r => r.date !== date);
            save();
            render();
        }

        // é€²æ—æ›´æ–°
        function updateGoals() {
            const sTotal = getWeekly("strength");
            const cTotal = getWeekly("cardio");

            const sPercent = strengthGoal ? Math.min(100, sTotal / strengthGoal * 100) : 0;
            const cPercent = cardioGoal ? Math.min(100, cTotal / cardioGoal * 100) : 0;

            strengthBar().style.width = sPercent + "%";
            cardioBar().style.width = cPercent + "%";

            document.getElementById("goalStatus").innerHTML =
                `ç­‹ãƒˆãƒ¬ï¼š${sTotal}/${strengthGoal || 0}å›<br>
  æœ‰é…¸ç´ ï¼š${cTotal}/${cardioGoal || 0}åˆ†`;
        }

        // ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ
        const nameEl = () => document.getElementById("name");
        const typeEl = () => document.getElementById("type");
        const amountEl = () => document.getElementById("amount");
        const noteEl = () => document.getElementById("note");

        const strengthGoalEl = () => document.getElementById("strengthGoal");
        const cardioGoalEl = () => document.getElementById("cardioGoal");

        const strengthBar = () => document.getElementById("strengthBar");
        const cardioBar = () => document.getElementById("cardioBar");

        // åˆæœŸè¡¨ç¤º
        render();
    </script>

</body>

</html>